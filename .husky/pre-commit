#!/bin/sh
# Check all files for unresolved merge conflicts
CONFLICT_FILES=$(git diff --cached --name-only | grep -v '^\.husky/' | xargs -I {} sh -c 'test -f "{}" && grep -lE "<<<<<<<|=======|>>>>>>>" "{}" || true' 2>/dev/null)

if [ -n "$CONFLICT_FILES" ]; then
  echo "‚ùå Commit blocked: Files have merge conflict markers."
  echo "Please resolve conflicts in the following files:"
  echo "$CONFLICT_FILES"
  exit 1
fi
